{"ID":"20250710104430-8k98hew","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250710104430-8k98hew","title":"7月3日～7月11日周报","type":"doc","updated":"20250711195220"},"Children":[{"ID":"20250710104430-xlhfqeb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250710104430-xlhfqeb","updated":"20250711195142"},"Children":[{"Type":"NodeText","Data":"论文阅读"}]},{"ID":"20250710104509-hsf08hx","Type":"NodeParagraph","Properties":{"id":"20250710104509-hsf08hx","updated":"20250710104529"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"MAC-VO: Metrics-aware Covariance for Learning-basedStereo Visual Odometry"}]},{"ID":"20250710104543-23ji0hh","Type":"NodeParagraph","Properties":{"id":"20250710104543-23ji0hh","updated":"20250710171856"},"Children":[{"Type":"NodeTextMark","TextMarkType":"u mark","TextMarkTextContent":"创新点1:"},{"Type":"NodeText","Data":"  提出一个基于学习的模型量化2D度量感知不确定性。受FLowFormer 和GMA（Global Motion Aggregation） 的启发。采用迭代更新模型和运动聚合器来预测2d图像中不确定性。"}]},{"ID":"20250710104553-1bf1w3o","Type":"NodeParagraph","Properties":{"id":"20250710104553-1bf1w3o","updated":"20250710104602"},"Children":[{"Type":"NodeText","Data":"具体代码流程如下："}]},{"ID":"20250710104602-t0k6ojt","Type":"NodeParagraph","Properties":{"id":"20250710104602-t0k6ojt","updated":"20250710104749"},"Children":[{"Type":"NodeText","Data":"设计获取2D度量感知不确定性网络时，先采用一个类似于Flowformer的流解码器获得f，在每次迭代中光流更新："}]},{"ID":"20250710104749-bfre9xr","Type":"NodeMathBlock","Properties":{"id":"20250710104749-bfre9xr","updated":"20250710104933"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"f_x = f_x + \\delta f"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250710104941-azwr7fb","Type":"NodeParagraph","Properties":{"id":"20250710104941-azwr7fb","updated":"20250711195142"},"Children":[{"Type":"NodeText","Data":"利用共享特征，使用ConvGRU层微调 一个新的解码器，以估计不去定性uc，在每次迭代中，匹配不确定性更新："}]},{"ID":"20250710105841-grpk8b9","Type":"NodeMathBlock","Properties":{"id":"20250710105841-grpk8b9","updated":"20250710105944"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\sigma = \\sigma \\times \\Delta \\sigma"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250710104543-9q5jlq1","Type":"NodeParagraph","Properties":{"id":"20250710104543-9q5jlq1","updated":"20250710171837"},"Children":[{"Type":"NodeTextMark","TextMarkType":"u mark","TextMarkTextContent":"创新点2:"},{"Type":"NodeText","Data":"  基于学习到的2D不确定值，使用度量感知3D协方差模型对3D空间中的特征点的协方差进行建模。相比于使用对角协方差矩阵，（Diagonal Covariance Matrix）其非对角元素全为0，对角元素上非零。意味着矩阵中的变量之间没有协方差，即不相关，只有每个变量自身的方差存在。"}]},{"ID":"20250710171728-z4q6gqw","Type":"NodeParagraph","Properties":{"id":"20250710171728-z4q6gqw","updated":"20250710172000"},"Children":[{"Type":"NodeText","Data":"基于2D的不确定性，通过考虑深度和匹配i不确定性投影到3D空间，包含非对角项以捕捉轴间相关性，并对深度不确定性进行矫正。这里考虑的参数较于DROID-VO多了轴间相关性。"}]},{"ID":"20250710172000-iqswr6n","Type":"NodeParagraph","Properties":{"id":"20250710172000-iqswr6n","updated":"20250710172033"},"Children":[{"Type":"NodeText","Data":"除了考虑每个轴的自身不确定性"}]},{"ID":"20250710172033-xg9wwpo","Type":"NodeMathBlock","Properties":{"id":"20250710172033-xg9wwpo","updated":"20250710172207"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\delta^2_{x}, \\delta_{y}^2 ,\\delta_{z}^2"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250710172211-csgrm7r","Type":"NodeParagraph","Properties":{"id":"20250710172211-csgrm7r","updated":"20250710172245"},"Children":[{"Type":"NodeText","Data":"还考虑了不同轴之间的协方差"}]},{"ID":"20250710172305-mx8o77x","Type":"NodeMathBlock","Properties":{"id":"20250710172305-mx8o77x","updated":"20250710172432"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\mathrm{Cov} (x_i,y_i) , \\mathrm{Cov}(x_i,z_i) ,\\mathrm{Cov}(y_i,z_i)"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250710172455-79q0bmt","Type":"NodeParagraph","Properties":{"id":"20250710172455-79q0bmt","updated":"20250710172522"},"Children":[{"Type":"NodeText","Data":"不同轴之间的协方差反应了轴间相关性"}]},{"ID":"20250711192541-lw114ih","Type":"NodeParagraph","Properties":{"id":"20250711192541-lw114ih","updated":"20250711192542"},"Children":[{"Type":"NodeText","Data":"相比于传统方法中简化为对角协方差矩阵，（假设各个方向上是独立的），而"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"MACVO"},{"Type":"NodeText","Data":"利用一个"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"学习到的2D度量感知不确定性模型"},{"Type":"NodeText","Data":"，通过不确定性传播原理，将2D特征点的不确定性映射至3D空间，构建出一个"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"非对角的3D协方差矩阵"},{"Type":"NodeText","Data":"，从而更准确地建模3D点之间的空间误差及其轴间相关性。"}]},{"ID":"20250711194713-tuhn4gt","Type":"NodeParagraph","Properties":{"id":"20250711194713-tuhn4gt","updated":"20250711194718"},"Children":[{"Type":"NodeText","Data":"不确定点的选择："}]},{"ID":"20250711194718-47fpn8w","Type":"NodeParagraph","Properties":{"id":"20250711194718-47fpn8w","updated":"20250711194754"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"截屏2025-07-11 19.47.04"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/截屏2025-07-11 19.47.04-20250711194754-fyja6lb.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20250711192210-yjrdnu5","Type":"NodeParagraph","Properties":{"id":"20250711192210-yjrdnu5","updated":"20250711192801"},"Children":[{"Type":"NodeText","Data":"通过基于学习的2D不确定性sigma和矫正后的3D协方差Sigma3D，筛选高质量点，协方差越小，该特征点越稳定。利用不确定性感知进行关键点选择后，进行位姿图优化。"}]},{"ID":"20250710171435-2e7p9xh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250710171435-2e7p9xh","updated":"20250711195220"},"Children":[{"Type":"NodeText","Data":"理论学习"}]},{"ID":"20250711194845-tr0hchn","Type":"NodeParagraph","Properties":{"id":"20250711194845-tr0hchn","updated":"20250711194852"},"Children":[{"Type":"NodeText","Data":"针对协方差建模公式推导"}]},{"ID":"20250711195004-mhbkexl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250711195004-mhbkexl","updated":"20250711195220"},"Children":[{"Type":"NodeText","Data":"协方差建模"}]},{"ID":"20250711195004-aten8oj","Type":"NodeParagraph","Properties":{"id":"20250711195004-aten8oj","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"针对3D特征点的协方差建模，是指针对估计出的三维特征点位置的"},{"Type":"NodeTextMark","TextMarkType":"strong u","TextMarkTextContent":"不确定性进行建模"},{"Type":"NodeText","Data":"，使用协方差矩阵来量化这些点在3维空间中的位置误差或者置信程度。"}]},{"ID":"20250711195004-eiq7xxp","Type":"NodeParagraph","Properties":{"id":"20250711195004-eiq7xxp","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"对3d特征点建模协方差的作用："}]},{"ID":"20250711195004-7eetd98","Type":"NodeParagraph","Properties":{"id":"20250711195004-7eetd98","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"在VO中三维点是通过三角测量（triangulation）等方式从多视角图像中恢复出来的。但由于图像噪声，匹配误差，相机标定等功能，计算出的3D点不是精确的，具有不确定性。"}]},{"ID":"20250711195004-svthfaz","Type":"NodeParagraph","Properties":{"id":"20250711195004-svthfaz","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"协方差建模的作用是："}]},{"ID":"20250711195004-z8bt32y","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711195004-z8bt32y","updated":"20250711195004"},"Children":[{"ID":"20250711195004-92nsftn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711195004-92nsftn","updated":"20250711195004"},"Children":[{"ID":"20250711195004-op1n3yi","Type":"NodeParagraph","Properties":{"id":"20250711195004-op1n3yi","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"衡量每个3D点的位置精度（误差在空间中多大，哪个方向更不准确）"}]}]},{"ID":"20250711195004-bfreig8","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711195004-bfreig8","updated":"20250711195004"},"Children":[{"ID":"20250711195004-tm0k6qj","Type":"NodeParagraph","Properties":{"id":"20250711195004-tm0k6qj","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"用于加权优化，在BA（Bundle Adjustment）或者SLAM中，更信任不确定性小的点"}]}]},{"ID":"20250711195004-5sv97vm","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250711195004-5sv97vm","updated":"20250711195004"},"Children":[{"ID":"20250711195004-f0y5hu1","Type":"NodeParagraph","Properties":{"id":"20250711195004-f0y5hu1","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"鲁棒性增强：避免过度依赖误差大的点，提高系统的稳定性"}]}]}]},{"ID":"20250711195004-9f64k8h","Type":"NodeParagraph","Properties":{"id":"20250711195004-9f64k8h","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"下面介绍3D点的协方差"}]},{"ID":"20250711195004-kdu397t","Type":"NodeMathBlock","Properties":{"id":"20250711195004-kdu397t","updated":"20250711195004"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\mathbf{p}=\n\\begin{bmatrix}\nx \\\\\ny \\\\\nz\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250711195004-93paviu","Type":"NodeParagraph","Properties":{"id":"20250711195004-93paviu","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"协方差建模表示一个3*3的协方差矩阵"}]},{"ID":"20250711195004-1yw0ele","Type":"NodeMathBlock","Properties":{"id":"20250711195004-1yw0ele","updated":"20250711195004"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\boldsymbol{\\Sigma}_p=\n\\begin{bmatrix}\n\\sigma_x^2 \u0026 \\mathrm{Cov}(x,y) \u0026 \\mathrm{Cov}(x,z) \\\\\n\\mathrm{Cov}(y,x) \u0026 \\sigma_y^2 \u0026 \\mathrm{Cov}(y,z) \\\\\n\\mathrm{Cov}(z,x) \u0026 \\mathrm{Cov}(z,y) \u0026 \\sigma_z^2\n\\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250711195004-z0wokch","Type":"NodeParagraph","Properties":{"id":"20250711195004-z0wokch","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"对角线是x/y/z的方向误差，（误差强弱）。非对角线变量之间的线性相关性（误差耦合）"}]},{"ID":"20250711195004-f8sch3a","Type":"NodeParagraph","Properties":{"id":"20250711195004-f8sch3a","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"在VO中对协方差建模："}]},{"ID":"20250711195004-7hapg5l","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711195004-7hapg5l","updated":"20250711195004"},"Children":[{"ID":"20250711195004-q7kwylv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711195004-q7kwylv","updated":"20250711195004"},"Children":[{"ID":"20250711195004-kgv9tyn","Type":"NodeParagraph","Properties":{"id":"20250711195004-kgv9tyn","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"基于误差传播 Error Propagation"}]}]}]},{"ID":"20250711195004-elfmwy2","Type":"NodeMathBlock","Properties":{"id":"20250711195004-elfmwy2","updated":"20250711195004"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\boldsymbol{\\Sigma}_p = \\mathrm{J} \\cdot \\boldsymbol{\\Sigma}_{obs} \\cdot \\mathrm{J}^T"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250711195004-7vw59pu","Type":"NodeParagraph","Properties":{"id":"20250711195004-7vw59pu","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"J是三角测量函数对观测点的雅可比矩阵"}]},{"ID":"20250711195004-g0xa6de","Type":"NodeParagraph","Properties":{"id":"20250711195004-g0xa6de","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"Sigma_obs是图像点测量误差协方差（通常假设单位矩阵乘以像素级方差）。"}]},{"ID":"20250711195004-ll7j2qz","Type":"NodeParagraph","Properties":{"id":"20250711195004-ll7j2qz","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"该公式量化了图像误差如何影响重建的3D点"}]},{"ID":"20250711195004-lymy3ia","Type":"NodeParagraph","Properties":{"id":"20250711195004-lymy3ia","updated":"20250711195004"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"雅可比矩阵J"},{"Type":"NodeText","Data":"  是函数f关于输入的偏导矩阵"}]},{"ID":"20250711195004-my6hx1m","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711195004-my6hx1m","updated":"20250711195004"},"Children":[{"ID":"20250711195004-aev30st","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711195004-aev30st","updated":"20250711195004"},"Children":[{"ID":"20250711195004-46jrs0g","Type":"NodeParagraph","Properties":{"id":"20250711195004-46jrs0g","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"基于最优化残差的协方差估计(BA优化后)"}]}]}]},{"ID":"20250711195004-788s3dw","Type":"NodeParagraph","Properties":{"id":"20250711195004-788s3dw","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"在BA优化过车个闹钟功能，可以计算每个点的残差Hessian逆作为协方差近似"}]},{"ID":"20250711195004-j102tgk","Type":"NodeMathBlock","Properties":{"id":"20250711195004-j102tgk","updated":"20250711195004"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"\\boldsymbol{\\Sigma}_p \\approx (\\mathrm{H}_p)^{-1}"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20250711195004-wgbgh5h","Type":"NodeParagraph","Properties":{"id":"20250711195004-wgbgh5h","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"Hp关于3D点的残差二阶导数Hessian"}]},{"ID":"20250711195004-molq7e2","Type":"NodeParagraph","Properties":{"id":"20250711195004-molq7e2","updated":"20250711195055"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"针对3D特征点的协方差建模”是在视觉里程计中，通过数学方式对每个三维点的空间位置不确定性进行量化，常用于加权优化和提高系统鲁棒性。"}]},{"ID":"20250711195004-urhh876","Type":"NodeParagraph","Properties":{"id":"20250711195004-urhh876","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"常用于："}]},{"ID":"20250711195004-nzzs9gy","Type":"NodeList","ListData":{},"Properties":{"id":"20250711195004-nzzs9gy","updated":"20250711195004"},"Children":[{"ID":"20250711195004-7mpbrh0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250711195004-7mpbrh0","updated":"20250711195004"},"Children":[{"ID":"20250711195004-ecuc4i0","Type":"NodeParagraph","Properties":{"id":"20250711195004-ecuc4i0","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"加权 BA（协方差越小权重越大）"}]}]},{"ID":"20250711195004-jptrt9b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250711195004-jptrt9b","updated":"20250711195004"},"Children":[{"ID":"20250711195004-xd751mo","Type":"NodeParagraph","Properties":{"id":"20250711195004-xd751mo","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"点云融合时的置信加权"}]}]},{"ID":"20250711195004-o4xumas","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250711195004-o4xumas","updated":"20250711195004"},"Children":[{"ID":"20250711195004-3xfltau","Type":"NodeParagraph","Properties":{"id":"20250711195004-3xfltau","updated":"20250711195004"},"Children":[{"Type":"NodeText","Data":"自适应关键帧选择（优先保留精度高的点）"}]}]}]},{"ID":"20250711193036-xvjo5er","Type":"NodeParagraph","Properties":{"id":"20250711193036-xvjo5er","updated":"20250711193037"},"Children":[{"Type":"NodeText","Data":"LK光流算法和KLT光流追踪"}]},{"ID":"20250711193009-u1f9629","Type":"NodeParagraph","Properties":{"id":"20250711193009-u1f9629","updated":"20250711195220"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: calc(33% - 8px);"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"WechatIMG292"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/WechatIMG292-20250707100153-mt49re3.jpg"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: calc(33% - 8px);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250711193009-4fm2094","Type":"NodeParagraph","Properties":{"id":"20250711193009-4fm2094","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"LK光流本来是只有一个方程是无法解决的，只有一个约束的欠定方程，但是好就好在区域一致性理论，LK光流考虑到了像素点的邻域，将问题变成计算某些点集的嘎滚流，连理多个方程，从而解决这个问题。最后使用最小二乘法来求解uv。"}]},{"ID":"20250711193009-qe4qk52","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250711193009-qe4qk52","updated":"20250711193009"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"A.v = b\n\nimport numpy as np\n#梯度信息Ix,Iy,It\nIx = np.array([1,1,0,-1,0,1,-1,-1])\nIy = np.array([0,1,1,0,-1,-1,-1,1])\nIt = np.array([-1,-1,-1,-1,-1,-1,-1,-1])\n#构建矩阵A和向量b\nA = np.vstack([Ix，Iy]).T\nb = -It\n#使用最小二乘法来求解光流(u,v)\nnv = np.linalg.lstsq(A,b,rcond = None)[0]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250711193009-evxxnv3","Type":"NodeParagraph","Properties":{"id":"20250711193009-evxxnv3","updated":"20250711193009"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"金字塔光流的动机"},{"Type":"NodeText","Data":"\nlucas-kanade 假设小运动，但图像中可能存在"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"大位移，如快速移动，低帧率"},{"Type":"NodeText","Data":"，因此需要通过构建图像金字塔pyramid，将图像从低分辨率到高分辨率逐步迭代处理："}]},{"ID":"20250711193009-dxpoum8","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711193009-dxpoum8","updated":"20250711193009"},"Children":[{"ID":"20250711193009-3dueros","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711193009-3dueros","updated":"20250711193009"},"Children":[{"ID":"20250711193009-0c6457a","Type":"NodeParagraph","Properties":{"id":"20250711193009-0c6457a","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"在金字塔的顶层：低分辨率估计一个粗略光流"}]}]},{"ID":"20250711193009-tuh563a","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711193009-tuh563a","updated":"20250711193009"},"Children":[{"ID":"20250711193009-rl8y4lv","Type":"NodeParagraph","Properties":{"id":"20250711193009-rl8y4lv","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"逐层向高分辨率refine，精制这个结果"}]}]},{"ID":"20250711193009-qnwtevt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250711193009-qnwtevt","updated":"20250711193009"},"Children":[{"ID":"20250711193009-bkyni6k","Type":"NodeParagraph","Properties":{"id":"20250711193009-bkyni6k","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"每一层中用lucas-kanade方法优化\nLucas-Kanade卢卡斯-卡纳德算法\n函数原型"}]}]}]},{"ID":"20250711193009-xeh1lfp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250711193009-xeh1lfp","updated":"20250711193009"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"void cvCalcOpticalFlowPyrLK(\nconst CvArr* prev,\nconst CvArr* curr,\nCvarr* prev_pyr,\nCvArr* curr_pyr, \nconst CvPoint2D32f* prev_features,\nconst CvPoint2D32f* curr_features,\nint count, \nCvSize win_size,\nint level,\nchar* status,\nfloat* track_error, \nCvTermCriteria criteria, \nint flags)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250711193009-rhy8ly0","Type":"NodeParagraph","Properties":{"id":"20250711193009-rhy8ly0","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"prev 在时间t的第一帧数\ncurr 在时间t+dt的第二帧\nprev_pyr第一帧的金字塔缓存，如果指针非NULL，则缓存必须有足够的空间来存储尽在他从层1到层#level的内容\ncurr_pyr 用于第二帧的金字塔缓存\nprev_features 需要发现光流的点集\ncurr_features包含计算出来的位置的点集\ncount 计算出来的特征点的数目\nwin_size每个金字塔层的搜索窗口尺寸\nlevel最大的金字塔的层数。如果为0，不使用金字塔，如果为1，使用2层，下面一次类推\nstatus 数组，如果对应特征的光流被发现，数组中的每一个元素都被设置为1，否则设置为0\nerror 双进度数组，包含原始图像碎片与移动点之间的差，为可选参数，可以为NULL\ncriteria 准则，指定在每个金字塔层，为某点寻找光流的迭代终止过程"}]},{"ID":"20250711193009-pagoe79","Type":"NodeParagraph","Properties":{"id":"20250711193009-pagoe79","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"KLT与LK的前世今生\nLK方法是用于光流估计的基本方法，通过图像提督来求解光流，是KLT算法的核心计算部分\nKLT算法是一个特征点跟踪方法，通过图像中的关键点或焦点，利用光流估算这些点在连续帧上的位置。KLT算法的计算过程依赖于LK方法来估算光流\nKLT中的KL就是LK两个人，加上Tomasi\nKLT算法通常分为两个主要的步骤："}]},{"ID":"20250711193009-jdymp6y","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711193009-jdymp6y","updated":"20250711193009"},"Children":[{"ID":"20250711193009-hrd1fop","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711193009-hrd1fop","updated":"20250711193009"},"Children":[{"ID":"20250711193009-t3i32tf","Type":"NodeParagraph","Properties":{"id":"20250711193009-t3i32tf","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"角点检测：使用Harris角点检测或者Tomasi角点检测等方法来检测图像中的特征点。"}]}]},{"ID":"20250711193009-l20qw7n","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711193009-l20qw7n","updated":"20250711193009"},"Children":[{"ID":"20250711193009-c3q45ex","Type":"NodeParagraph","Properties":{"id":"20250711193009-c3q45ex","updated":"20250711193009"},"Children":[{"Type":"NodeText","Data":"特征点跟踪：利用光流假设（物体的局部运动相对较小，相邻像素的光流蕾丝）来跟踪这些特征点在两帧图像之间的运动"}]}]}]},{"ID":"20250710171455-0m6im1j","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250710171455-0m6im1j","updated":"20250711194210"},"Children":[{"Type":"NodeText","Data":"代码学习"}]},{"ID":"20250711193141-izqs93h","Type":"NodeParagraph","Properties":{"id":"20250711193141-izqs93h","updated":"20250711193141"},"Children":[{"Type":"NodeText","Data":"在单目视觉中无法决定一个物体的真实大小，一条线上的点全部投影到一个位置，就导致了仅通过单张图像无法获得像素的尺度信息。解决方案是通过获得不同视角的图像，然后通过三角测量Triangulation（化）的方法来估计地图点的深度"}]},{"ID":"20250711193141-zxwr89e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250711193141-zxwr89e","updated":"20250711193141"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"//************************************\n// Description: 根据左右相机中像素坐标求解空间坐标\n// Method:    uv2xyz\n// Parameter: Point2f uvLeft\n// Parameter: Point2f uvRight\n// Returns:   cv::Point3f\n//************************************\ncv::Point3d uv2xyz(cv::Point2d uvLeft,cv::Point2d uvRight,cv::Mat mLeftP,cv::Mat mRightP)\n{\n    //     [u1]      [xw]                      [u2]      [xw]\n    //zc1 *|v1| = Pl*[yw]                  zc2*|v2| = P2*[yw]\n    //     [ 1]      [zw]                      [ 1]      [zw]\n    //               [1 ]                                [1 ]\n \n    //最小二乘法A矩阵\n    cv::Mat A = cv::Mat(4,3,CV_64F);\n    A.at\u003cdouble\u003e(0,0) = uvLeft.x * mLeftP.at\u003cdouble\u003e(2,0) - mLeftP.at\u003cdouble\u003e(0,0);\n    A.at\u003cdouble\u003e(0,1) = uvLeft.x * mLeftP.at\u003cdouble\u003e(2,1) - mLeftP.at\u003cdouble\u003e(0,1);\n    A.at\u003cdouble\u003e(0,2) = uvLeft.x * mLeftP.at\u003cdouble\u003e(2,2) - mLeftP.at\u003cdouble\u003e(0,2);\n \n    A.at\u003cdouble\u003e(1,0) = uvLeft.y * mLeftP.at\u003cdouble\u003e(2,0) - mLeftP.at\u003cdouble\u003e(1,0);\n    A.at\u003cdouble\u003e(1,1) = uvLeft.y * mLeftP.at\u003cdouble\u003e(2,1) - mLeftP.at\u003cdouble\u003e(1,1);\n    A.at\u003cdouble\u003e(1,2) = uvLeft.y * mLeftP.at\u003cdouble\u003e(2,2) - mLeftP.at\u003cdouble\u003e(1,2);\n \n    A.at\u003cdouble\u003e(2,0) = uvRight.x * mRightP.at\u003cdouble\u003e(2,0) - mRightP.at\u003cdouble\u003e(0,0);\n    A.at\u003cdouble\u003e(2,1) = uvRight.x * mRightP.at\u003cdouble\u003e(2,1) - mRightP.at\u003cdouble\u003e(0,1);\n    A.at\u003cdouble\u003e(2,2) = uvRight.x * mRightP.at\u003cdouble\u003e(2,2) - mRightP.at\u003cdouble\u003e(0,2);\n \n    A.at\u003cdouble\u003e(3,0) = uvRight.y * mRightP.at\u003cdouble\u003e(2,0) - mRightP.at\u003cdouble\u003e(1,0);\n    A.at\u003cdouble\u003e(3,1) = uvRight.y * mRightP.at\u003cdouble\u003e(2,1) - mRightP.at\u003cdouble\u003e(1,1);\n    A.at\u003cdouble\u003e(3,2) = uvRight.y * mRightP.at\u003cdouble\u003e(2,2) - mRightP.at\u003cdouble\u003e(1,2);\n \n    //最小二乘法B矩阵\n    cv::Mat B = cv::Mat(4,1,CV_64F);\n    B.at\u003cdouble\u003e(0,0) = mLeftP.at\u003cdouble\u003e(0,3) - uvLeft.x * mLeftP.at\u003cdouble\u003e(2,3);\n    B.at\u003cdouble\u003e(1,0) = mLeftP.at\u003cdouble\u003e(1,3) - uvLeft.y * mLeftP.at\u003cdouble\u003e(2,3);\n    B.at\u003cdouble\u003e(2,0) = mRightP.at\u003cdouble\u003e(0,3) - uvRight.x * mRightP.at\u003cdouble\u003e(2,3);\n    B.at\u003cdouble\u003e(3,0) = mRightP.at\u003cdouble\u003e(1,3) - uvRight.y * mRightP.at\u003cdouble\u003e(2,3);\n \n    cv::Mat XYZ = cv::Mat(3,1,CV_64F);\n    //采用SVD最小二乘法求解XYZ\n    cv::solve(A,B,XYZ,cv::DECOMP_SVD);\n \n    //std::cout\u003c\u003c\"空间坐标为 = \"\u003c\u003cstd::endl\u003c\u003cXYZ\u003c\u003cstd::endl;\n \n    //世界坐标系中坐标\n    cv::Point3d world;\n    world.x = XYZ.at\u003cdouble\u003e(0,0);\n    world.y = XYZ.at\u003cdouble\u003e(1,0);\n    world.z = XYZ.at\u003cdouble\u003e(2,0);\n \n    return world;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250711193141-k6cei0h","Type":"NodeParagraph","Properties":{"id":"20250711193141-k6cei0h","updated":"20250711193940"},"Children":[{"Type":"NodeText","Data":"投影矩阵，选出左相机(u1,v1)和右相机(u2,v2)的点在图像中投影的位置"}]},{"ID":"20250711193141-odjcmb3","Type":"NodeParagraph","Properties":{"id":"20250711193141-odjcmb3","updated":"20250711193141"},"Children":[{"Type":"NodeText","Data":"投影矩阵P =K* [R | t]  (3,4)"}]},{"ID":"20250711193141-xgrh8qx","Type":"NodeParagraph","Properties":{"id":"20250711193141-xgrh8qx","updated":"20250711193141"},"Children":[{"Type":"NodeText","Data":"Z * [u1,v1,1]T = P1 * [xw,yw,zw,1]T"}]},{"ID":"20250711193141-1aw5s6p","Type":"NodeParagraph","Properties":{"id":"20250711193141-1aw5s6p","updated":"20250711193141"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"截屏2025-07-04 15.17.02"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/截屏2025-07-04 15.17.02-20250704151731-rxhzc8c.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20250711193948-z55x9qd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250711193948-z55x9qd","updated":"20250711194521"},"Children":[{"Type":"NodeText","Data":"对ORBSLAM系统的初步学习与分析"}]},{"ID":"20250711194331-vx3jqwz","Type":"NodeParagraph","Properties":{"id":"20250711194331-vx3jqwz","updated":"20250711194354"},"Children":[{"Type":"NodeText","Data":"系统架构具体有以下功能模块"}]},{"ID":"20250711194132-0oicx33","Type":"NodeParagraph","Properties":{"id":"20250711194132-0oicx33","updated":"20250711194457"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkTextContent":"匹配算法"},{"Type":"NodeText","Data":"、地图点、关键帧、IMU融合、优化、轨迹评估"}]},{"ID":"20250711194355-eveye8s","Type":"NodeParagraph","Properties":{"id":"20250711194355-eveye8s","updated":"20250711194521"},"Children":[{"Type":"NodeText","Data":"阅读了匹配算法的部分代码"}]},{"ID":"20250711194305-mduuc0b","Type":"NodeParagraph","Properties":{"id":"20250711194305-mduuc0b","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"特征点法求解位姿"}]},{"ID":"20250711194305-2059liu","Type":"NodeParagraph","Properties":{"id":"20250711194305-2059liu","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"特征点法：2D到2D,3D到2D,3D到3D"}]},{"ID":"20250711194305-p9kuv07","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711194305-p9kuv07","updated":"20250711194305"},"Children":[{"ID":"20250711194305-w9as4x8","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711194305-w9as4x8","updated":"20250711194305"},"Children":[{"ID":"20250711194305-g5hq3by","Type":"NodeParagraph","Properties":{"id":"20250711194305-g5hq3by","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"2d到2d使用对极几何约束，推导出3个矩阵："},{"Type":"NodeTextMark","Properties":{"style":"background-color: var(--b3-font-background12);"},"TextMarkType":"text","TextMarkTextContent":"本质矩阵，基础矩阵，单应矩阵"},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"background-color: var(--b3-font-background12);\"}"}]}]}]},{"ID":"20250711194305-y0y8c7r","Type":"NodeParagraph","Properties":{"id":"20250711194305-y0y8c7r","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"P1投影的极线，l2 = Fp1 ，P2投影的极线 l1 = p2转置 F"}]},{"ID":"20250711194305-nzlc7e8","Type":"NodeParagraph","Properties":{"id":"20250711194305-nzlc7e8","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"对极约束：p2TFp1 = 0."}]},{"ID":"20250711194305-vut2jij","Type":"NodeParagraph","Properties":{"id":"20250711194305-vut2jij","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"本质矩阵： E = t^R（反对称矩阵），基础矩阵 F = K(-T)t ^RK (-1)"}]},{"ID":"20250711194305-tt8ljnn","Type":"NodeParagraph","Properties":{"id":"20250711194305-tt8ljnn","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"单应矩阵： H = K(R-tnT/d)K(-1)"}]},{"ID":"20250711194305-wea4oe3","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711194305-wea4oe3","updated":"20250711194305"},"Children":[{"ID":"20250711194305-8t9vvkp","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711194305-8t9vvkp","updated":"20250711194305"},"Children":[{"ID":"20250711194305-ec2bdgy","Type":"NodeParagraph","Properties":{"id":"20250711194305-ec2bdgy","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"3D-\u003e2D pnp, 实现3d到2d的匹配，实现3d-2d重投影误差实现位姿和地图点的优化。"}]}]},{"ID":"20250711194305-nygyvg7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250711194305-nygyvg7","updated":"20250711194305"},"Children":[{"ID":"20250711194305-8d44hwf","Type":"NodeParagraph","Properties":{"id":"20250711194305-8d44hwf","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"3D-\u003e3D ICP ，实际应用中更多实用ICP算法进行位姿优化"}]}]}]},{"ID":"20250711194305-f35xkpd","Type":"NodeParagraph","Properties":{"id":"20250711194305-f35xkpd","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"直接法求解位姿"}]},{"ID":"20250711194305-eccgq47","Type":"NodeParagraph","Properties":{"id":"20250711194305-eccgq47","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"重投影光度误差"}]},{"ID":"20250711194305-6xmxma0","Type":"NodeParagraph","Properties":{"id":"20250711194305-6xmxma0","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"不进行匹配，更具当前相机的位姿估计值来寻找p2的位置"}]},{"ID":"20250711194305-od8vx8o","Type":"NodeParagraph","Properties":{"id":"20250711194305-od8vx8o","updated":"20250711194320"},"Children":[{"Type":"NodeText","Data":"代码匹配流程"}]},{"ID":"20250711194305-qdj8i1j","Type":"NodeParagraph","Properties":{"id":"20250711194305-qdj8i1j","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"2D-2D匹配"}]},{"ID":"20250711194305-dn383qv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250711194305-dn383qv","updated":"20250711194305"},"Children":[{"ID":"20250711194305-uz3g2ut","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250711194305-uz3g2ut","updated":"20250711194305"},"Children":[{"ID":"20250711194305-8z2csow","Type":"NodeParagraph","Properties":{"id":"20250711194305-8z2csow","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"初始图像帧的特征点-当前图形帧的特征点"}]}]},{"ID":"20250711194305-3h8534x","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250711194305-3h8534x","updated":"20250711194305"},"Children":[{"ID":"20250711194305-wbgiq4g","Type":"NodeParagraph","Properties":{"id":"20250711194305-wbgiq4g","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"在每个初始图像帧的特征点邻域内寻找当前图像帧中的特征点作为候选点"}]}]},{"ID":"20250711194305-bn7cv8h","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250711194305-bn7cv8h","updated":"20250711194305"},"Children":[{"ID":"20250711194305-9cpz3ia","Type":"NodeParagraph","Properties":{"id":"20250711194305-9cpz3ia","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"在候选点中分别求解描述子的距离"}]}]},{"ID":"20250711194305-jhv1gge","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20250711194305-jhv1gge","updated":"20250711194305"},"Children":[{"ID":"20250711194305-gievfr0","Type":"NodeParagraph","Properties":{"id":"20250711194305-gievfr0","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"选取最小描述子距离的特征点作为匹配特征点"}]}]},{"ID":"20250711194305-u8uli33","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20250711194305-u8uli33","updated":"20250711194305"},"Children":[{"ID":"20250711194305-t2hwqzw","Type":"NodeParagraph","Properties":{"id":"20250711194305-t2hwqzw","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"进行方向检查"}]}]},{"ID":"20250711194305-mclyzlx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20250711194305-mclyzlx","updated":"20250711194305"},"Children":[{"ID":"20250711194305-8l4iq4x","Type":"NodeParagraph","Properties":{"id":"20250711194305-8l4iq4x","updated":"20250711194305"},"Children":[{"Type":"NodeText","Data":"输出匹配结果"}]}]}]}]}