{"ID":"20250722194132-t6860nl","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250722194132-t6860nl","title":"话题通信","type":"doc","updated":"20250723202145"},"Children":[{"ID":"20250722194132-0wlesin","Type":"NodeParagraph","Properties":{"id":"20250722194132-0wlesin","updated":"20250722194201"},"Children":[{"Type":"NodeText","Data":"话题通信事ROS中使用频率最高的一种通信模式，"}]},{"ID":"20250722194221-u4zgcuh","Type":"NodeParagraph","Properties":{"id":"20250722194221-u4zgcuh","updated":"20250722194221"},"Children":[{"Type":"NodeText","Data":"比如下面一个常见场景:"}]},{"ID":"20250722194221-blwh3yd","Type":"NodeBlockquote","Properties":{"id":"20250722194221-blwh3yd","updated":"20250722194232"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20250722194221-1o754so","Type":"NodeParagraph","Properties":{"id":"20250722194221-1o754so","updated":"20250722194221"},"Children":[{"Type":"NodeText","Data":"机器人在执行导航功能，使用的传感器是激光雷达，机器人会采集激光雷达感知到的信息并计算，然后生成运动控制信息驱动机器人底盘运动。"}]}]},{"ID":"20250722194232-p9eomes","Type":"NodeParagraph","Properties":{"id":"20250722194232-p9eomes","updated":"20250722194312"},"Children":[{"Type":"NodeText","Data":"分为3部分，雷达模块，导航模块，底盘模块"}]},{"ID":"20250722194351-9wc2goi","Type":"NodeParagraph","Properties":{"id":"20250722194351-9wc2goi","updated":"20250722194447"},"Children":[{"Type":"NodeText","Data":"雷达发布传感数据，导航订阅；导航发布计算信息，底盘进行订阅。"}]},{"ID":"20250722194447-32jd18z","Type":"NodeParagraph","Properties":{"id":"20250722194447-32jd18z","updated":"20250722194546"},"Children":[{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"适用于不断更新的，少逻辑处理的数据传输应用场景"}]},{"ID":"20250722194526-w7bfvl7","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250722194526-w7bfvl7","updated":"20250723160309"},"Children":[{"Type":"NodeText","Data":"话题通信的基本操作"}]},{"ID":"20250723160051-le6tjc1","Type":"NodeParagraph","Properties":{"id":"20250723160051-le6tjc1","updated":"20250723160103"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"发布方"}]},{"ID":"20250723155655-jpkr78b","Type":"NodeParagraph","Properties":{"id":"20250723155655-jpkr78b","updated":"20250723160016"},"Children":[{"Type":"NodeText","Data":"初始化节点,实例化句柄，实例化发布对象,编写发布逻辑，设置频率"}]},{"ID":"20250723155701-zn9hx4l","Type":"NodeParagraph","Properties":{"id":"20250723155701-zn9hx4l","updated":"20250723155954"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::init(argc,argv,\"talker\")"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::NodeHandler nh"},{"Type":"NodeText","Data":"​,"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::Publisher pub = nh.advertise\u0026lt;std_msgs::String\u0026gt;(\"chatter\",10)"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250723160017-0wl2lqu","Type":"NodeParagraph","Properties":{"id":"20250723160017-0wl2lqu","updated":"20250723160029"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::Rate(10)"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250723160104-96w2rji","Type":"NodeParagraph","Properties":{"id":"20250723160104-96w2rji","updated":"20250723160109"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"接收方"}]},{"ID":"20250723160110-1ocd229","Type":"NodeParagraph","Properties":{"id":"20250723160110-1ocd229","updated":"20250723160203"},"Children":[{"Type":"NodeText","Data":"初始化节点，实例化句柄，实例化订阅对象，传入回调函数处理订阅数据，设置循环调用函数"}]},{"ID":"20250723160203-un67idv","Type":"NodeParagraph","Properties":{"id":"20250723160203-un67idv","updated":"20250723160307"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::Subscriber sub = nh.subscribe\u0026lt;std_msgs::String\u0026gt;(\"chatter\",10,doMsg)"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ros::spin"},{"Type":"NodeText","Data":"​"}]},{"ID":"20250723160309-7f7cuje","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250723160309-7f7cuje","updated":"20250723202145"},"Children":[{"Type":"NodeText","Data":"自定义msg"}]},{"ID":"20250723160352-bjujocp","Type":"NodeParagraph","Properties":{"id":"20250723160352-bjujocp","updated":"20250723160515"},"Children":[{"Type":"NodeText","Data":"只有一个data字段，结构的单一化代表了功能的局限性，当传输一些比较复杂的数据，比如激光雷达信息std_msgs由于描述较差需要使用自定义的消息类型"}]},{"ID":"20250723160517-fnzh4ie","Type":"NodeParagraph","Properties":{"id":"20250723160517-fnzh4ie","updated":"20250723160619"},"Children":[{"Type":"NodeText","Data":"ROS中还有一种特殊类型Header，表头包换时间戳和ROS中常用的坐标帧信息，会经常看到msg文件的第一行具有Header标头"}]},{"ID":"20250723164256-5806ct7","Type":"NodeParagraph","Properties":{"id":"20250723164256-5806ct7","updated":"20250723164314"},"Children":[{"Type":"NodeText","Data":"关注的重点任然是3个："}]},{"ID":"20250723164314-qlr3469","Type":"NodeParagraph","Properties":{"id":"20250723164314-qlr3469","updated":"20250723164330"},"Children":[{"Type":"NodeText","Data":"发布方，接收方，数据自定义消息"}]},{"ID":"20250723194914-xvekw39","Type":"NodeParagraph","Properties":{"id":"20250723194914-xvekw39","updated":"20250723200353"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong u","TextMarkTextContent":"实现过程，"},{"Type":"NodeText","Data":"先在功能包下新建一个名为msg的文件夹，在里面新建文件 ***.msg,"}]},{"ID":"20250723200339-3h9lt73","Type":"NodeParagraph","Properties":{"id":"20250723200339-3h9lt73","updated":"20250723201027"},"Children":[{"Type":"NodeText","Data":"然后再在package.xml和CMakelist中添加依赖相关，编译依赖build和运行依赖runtime的自定义消息的库，"}]},{"ID":"20250723200958-jnoeu5d","Type":"NodeParagraph","Properties":{"id":"20250723200958-jnoeu5d","updated":"20250723201200"},"Children":[{"Type":"NodeText","Data":"还需要在CMakelist中添加加入文件信息，配置msg源文件，确保msg文件被编译。"}]},{"ID":"20250723200956-szk751t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250723200956-szk751t","updated":"20250723201222"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"add_message_files(\n  FILES\n  Person.msg\n)\ngenerate_messages(\n  DEPENDENCIES\n  std_msgs\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250723201011-umev1s6","Type":"NodeParagraph","Properties":{"id":"20250723201011-umev1s6","updated":"20250723202136"},"Children":[{"Type":"NodeText","Data":"下面是为了在编译的时候确保编译顺序，先编译message文件，再编译源文件"}]},{"ID":"20250723202136-5653y5a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250723202136-5653y5a","updated":"20250723202145"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"add_dependencies(person_talker ${PROJECT_NAME}_generate_messages_cpp)\nadd_dependencies(person_listener ${PROJECT_NAME}_generate_messages_cpp)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250723202139-bnh6pon","Type":"NodeParagraph","Properties":{"id":"20250723202139-bnh6pon","updated":"20250723202139"}}]}