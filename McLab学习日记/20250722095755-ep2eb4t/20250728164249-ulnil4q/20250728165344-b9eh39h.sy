{"ID":"20250728165344-b9eh39h","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250728165344-b9eh39h","title":"ros常用API","type":"doc","updated":"20250729174228"},"Children":[{"ID":"20250728165344-66nu7pw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250728165344-66nu7pw","updated":"20250728175733"},"Children":[{"Type":"NodeText","Data":"初始化"}]},{"ID":"20250728171837-ejdy1bh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250728171837-ejdy1bh","updated":"20250728171920"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"/** @brief ROS初始化函数。\n * \\param argc 参数个数\n * \\param argv 参数列表\n * \\param name 节点名称，需要保证其唯一性，不允许包含命名空间\n * \\param options 节点启动选项，被封装进了ros::init_options\n */\nvoid init(int \u0026argc, char **argv, const std::string\u0026 name, uint32_t options = 0);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250728175728-hd6abo0","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250728175728-hd6abo0","updated":"20250728175733"},"Children":[{"ID":"20250728175733-tcvlz8s","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250728175733-tcvlz8s","updated":"20250728175733"},"Children":[{"ID":"20250728175733-mbyso13","Type":"NodeParagraph","Properties":{"id":"20250728175733-mbyso13","updated":"20250728175758"},"Children":[{"Type":"NodeText","Data":"传入到argv中的参数都挂载到了参数服务器之下"}]}]},{"ID":"20250728175814-warqpzg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250728175814-warqpzg","updated":"20250728175814"},"Children":[{"ID":"20250728175814-xu1526b","Type":"NodeParagraph","Properties":{"id":"20250728175814-xu1526b","updated":"20250728175919"},"Children":[{"Type":"NodeText","Data":"option的使用：节点名称需要保证唯一，会导致一个问题：同一个几点不能重复启动，结果：ROS中当有重名的节点启动时候，之前的节点会被关闭。"}]},{"ID":"20250728175923-xfi5yon","Type":"NodeParagraph","Properties":{"id":"20250728175923-xfi5yon","updated":"20250728180000"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"需求：在特定场景下需要一个节点多次启动且能正常运行使用"}]}]}]},{"ID":"20250728180004-7ctmm4p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250728180004-7ctmm4p","updated":"20250728180111"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"ros::init(argc,argc,\"node_name\",ros::init_options::AnonymousName);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250728180112-r8jpuup","Type":"NodeParagraph","Properties":{"id":"20250728180112-r8jpuup","updated":"20250728180202"},"Children":[{"Type":"NodeText","Data":"option使node_name后设置一串附加数字，保证节点名称不一致性的同时，可以启动多个相同功能的节点。"}]},{"ID":"20250728171844-skqd21j","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250728171844-skqd21j","updated":"20250729160308"},"Children":[{"Type":"NodeText","Data":"话题与服务对象"}]},{"ID":"20250728171957-6jolx64","Type":"NodeParagraph","Properties":{"id":"20250728171957-6jolx64","updated":"20250728172020"},"Children":[{"Type":"NodeText","Data":"在 roscpp 中，话题和服务的相关对象一般由 NodeHandle 创建，NodeHandle有一个重要作用是可以用于设置命名空间。"}]},{"ID":"20250728172021-6hjr6zm","Type":"NodeParagraph","Properties":{"id":"20250728172021-6hjr6zm","updated":"20250728180350"},"Children":[{"Type":"NodeText","Data":"1.发布对象"}]},{"ID":"20250728180350-67i6axx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250728180350-67i6axx","updated":"20250729103824"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"ros::Publish pub = nh.advertise\u003cstd_msg::String\u003e(\"fang\",10);\n\n/para topic, queue_size, latch(可选)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250728172151-n78tlo1","Type":"NodeParagraph","Properties":{"id":"20250728172151-n78tlo1","updated":"20250729103909"},"Children":[{"Type":"NodeText","Data":"latch一般为false，为true的时候，会保存发布方的最后一条消息，并且新的订阅对戏那个链接到发布方的时候发布方会将这条消息发送给订阅者"}]},{"ID":"20250729104153-kcpcwiv","Type":"NodeParagraph","Properties":{"id":"20250729104153-kcpcwiv","updated":"20250729104207"},"Children":[{"Type":"NodeText","Data":"使用场景，静态地图的发布，只进行发布一次"}]},{"ID":"20250729103909-8s57kcm","Type":"NodeParagraph","Properties":{"id":"20250729103909-8s57kcm","updated":"20250729103935"},"Children":[{"Type":"NodeText","Data":"作用：方案1:可以使用固定频率发送地图数据，但是效率低"}]},{"ID":"20250729103935-3mfpzzn","Type":"NodeParagraph","Properties":{"id":"20250729103935-3mfpzzn","updated":"20250729104034"},"Children":[{"Type":"NodeText","Data":"\t   方案2:可以将地图发布对象的latch 设置为true，并且发布方知发送一次数据，每当有订阅着连接的时候，将地图数据发送给订阅者（1次），可以提高发送效率"}]},{"ID":"20250729160301-l7gdwg2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250729160301-l7gdwg2","updated":"20250729164154"},"Children":[{"Type":"NodeText","Data":"时间操作相关"}]},{"ID":"20250729160311-ln78lqy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250729160311-ln78lqy","updated":"20250729160337"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"ros::Time begin ,end ;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250729160338-jcj0pt8","Type":"NodeParagraph","Properties":{"id":"20250729160338-jcj0pt8","updated":"20250729160418"},"Children":[{"Type":"NodeText","Data":"begin和end之间不能相加只能相减，相减返回值是一个ros::Duration 类型的"}]},{"ID":"20250729160421-lgw6mjy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250729160421-lgw6mjy","updated":"20250729160434"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"ros::Duration du = begin - end\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250729161636-xp2q1vk","Type":"NodeParagraph","Properties":{"id":"20250729161636-xp2q1vk","updated":"20250729161649"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"定时器"}]},{"ID":"20250729161654-kgabefm","Type":"NodeParagraph","Properties":{"id":"20250729161654-kgabefm","updated":"20250729161703"},"Children":[{"Type":"NodeText","Data":"每隔一段时间输出一段信息"}]},{"ID":"20250729161703-9nnphhn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250729161703-9nnphhn","updated":"20250729163743"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cm9z"},{"Type":"NodeCodeBlockCode","Data":"ros::Timer timer = nh.createTimer(ros::Duration period,  //执行频率\n\t\t\t\t\t\t\t\tconst ros::TimerCallback \u0026 callback, //回调函数\n\t\t\t\t\t\t\t\tbool oneshot = false,\t//只执行1次\n\t\t\t\t\t\t\t\tbool autostart = true,)\t//自动启动\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250729163744-u8iyuup","Type":"NodeParagraph","Properties":{"id":"20250729163744-u8iyuup","updated":"20250729163744"}},{"ID":"20250729164154-we9a8fj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250729164154-we9a8fj","updated":"20250729174228"},"Children":[{"Type":"NodeText","Data":"日志输出"}]},{"ID":"20250729164215-6o2b9iu","Type":"NodeParagraph","Properties":{"id":"20250729164215-6o2b9iu","updated":"20250729164215"},"Children":[{"Type":"NodeText","Data":"日志相关的函数也是极其常用的，在ROS中日志被划分成如下级别:"}]},{"ID":"20250729164215-cg7e1i4","Type":"NodeList","ListData":{},"Properties":{"id":"20250729164215-cg7e1i4","updated":"20250729164237"},"Children":[{"ID":"20250729164215-4ovtlal","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250729164215-4ovtlal","updated":"20250729164215"},"Children":[{"ID":"20250729164215-ivmpd5m","Type":"NodeParagraph","Properties":{"id":"20250729164215-ivmpd5m","updated":"20250729164215"},"Children":[{"Type":"NodeText","Data":"DEBUG(调试):只在调试时使用，此类消息不会输出到控制台；"}]}]},{"ID":"20250729164215-vev58e6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250729164215-vev58e6","updated":"20250729164215"},"Children":[{"ID":"20250729164215-1e2dxrr","Type":"NodeParagraph","Properties":{"id":"20250729164215-1e2dxrr","updated":"20250729164215"},"Children":[{"Type":"NodeText","Data":"INFO(信息):标准消息，一般用于说明系统内正在执行的操作；"}]}]},{"ID":"20250729164215-f9r7swn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250729164215-f9r7swn","updated":"20250729164215"},"Children":[{"ID":"20250729164215-va7r01p","Type":"NodeParagraph","Properties":{"id":"20250729164215-va7r01p","updated":"20250729164215"},"Children":[{"Type":"NodeText","Data":"WARN(警告):提醒一些异常情况，但程序仍然可以执行；"}]}]},{"ID":"20250729164215-uph939o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250729164215-uph939o","updated":"20250729164215"},"Children":[{"ID":"20250729164215-9h97u18","Type":"NodeParagraph","Properties":{"id":"20250729164215-9h97u18","updated":"20250729164215"},"Children":[{"Type":"NodeText","Data":"ERROR(错误):提示错误信息，此类错误会影响程序运行；"}]}]},{"ID":"20250729164215-uyouvvu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250729164215-uyouvvu","updated":"20250729164237"},"Children":[{"ID":"20250729164215-2ouvw3s","Type":"NodeParagraph","Properties":{"id":"20250729164215-2ouvw3s","updated":"20250729164237"},"Children":[{"Type":"NodeText","Data":"FATAL(严重错误):此类错误将阻止节点继续运行。 "}]}]}]},{"ID":"20250729174228-cs0y1s9","Type":"NodeParagraph","Properties":{"id":"20250729174228-cs0y1s9","updated":"20250729174228"}}]}